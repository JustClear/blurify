(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.blurify=b()})("undefined"==typeof self?this:self,function(){"use strict";function a(a){function b(){d++,d==a.length&&e(c)}var c=[],d=0,e=function(){};return a="object"==typeof a?a:[a],0===a.length&&e(c),a.map(function(a){var d=new Image;d.crossOrigin="*",d.src=a.dataset?a.dataset.src:a.getAttribute("data-src"),d.onload=b,d.onerror=b,c.push(d)}),{done:function(){e=arguments[0]||e}}}function b(a,b){var c=document.createElement("div");switch(arguments.length){case 1:return!!(a in c.style);case 2:return c.style[a]=b,!!c.style[a];default:return!1;}}function c(a){return void 0===a&&(a={blur:6,mode:"auto",images:[]}),this instanceof c?void("number"==typeof a&&(a={blur:a,images:arguments[1],mode:"auto"}),this.options=a,this.blur=a.blur||6,this.mode=a.mode||"css",console.log(),this.$els=1==a.images.nodeType?[a.images]:[].slice.call(a.images),"auto"==this.mode?b("filter","blur(1px)")?this.useCSSMode():this.useCanvasMode():"css"==this.mode?(this.blur/=2,this.useCSSMode()):this.useCanvasMode()):new c(a)}return c.prototype.useCSSMode=function(){var a=this;console.log(this.$els),this.$els.map(function(b){console.log("el",b),b.src=b.dataset?b.dataset.src:b.getAttribute("data-src"),b.style.filter=b.style["-webkit-filter"]="blur("+a.blur+"px)"})},c.prototype.useCanvasMode=function(){var b=this;this.imageType=this.options.imageType||"image/jpeg",a(this.$els).done(function(a){a.map(function(a,c){b.$els[c].src=b.getDataURL(a)})})},c.prototype.blurify=function(a,b){var c=a.getContext("2d");c.globalAlpha=1/(2*+b);for(var d=-b;d<=b;d+=2)for(var e=-b;e<=b;e+=2)c.drawImage(a,e,d),0<=e&&0<=d&&c.drawImage(a,-(e-1),-(d-1));c.globalAlpha=1},c.prototype.getDataURL=function(a){var b=document.createElement("canvas"),c=b.getContext("2d");return b.width=a.width,b.height=a.height,c.drawImage(a,0,0),this.blurify(b,this.blur),b.toDataURL(this.imageType)},c});
//# sourceMappingURL=blurify.min.js.map
